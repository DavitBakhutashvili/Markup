{"ast":null,"code":"import axios from 'axios';\nimport { login, refreshTokens, sendTextToServer } from '../services/useApiServices';\nclass MyClass {\n  constructor() {\n    this.start = async () => {\n      // Login and get the initial tokens\n      await this.login();\n      while (this.currentPos < this.text.length) {\n        const endPos = this.calculateEndPos();\n        const sentence = this.text.substring(this.currentPos, endPos);\n        this.currentPos = endPos;\n\n        // send sentence to the server\n        const result = await this.sendTextToServer(sentence);\n\n        // check if the onresult function exists and call it\n        if (typeof this.onresult === 'function') {\n          this.onresult(result);\n        }\n      }\n    };\n    this.refreshTokens = async () => {\n      const response = await axios.post('https://enagramm.com/API/Account/RefreshToken', {\n        AccessToken: this.token,\n        RefreshToken: this.refreshToken\n      });\n      this.token = response.data.AccessToken;\n      this.refreshToken = response.data.RefreshToken;\n    };\n    this.calculateEndPos = () => {\n      const endPosLimit = Math.min(this.currentPos + 230, this.text.length);\n      for (let i = this.currentPos + 150; i <= endPosLimit; i++) {\n        if (['.', '!', '?', ';', ','].includes(this.text[i])) {\n          return i + 1;\n        }\n      }\n      return endPosLimit;\n    };\n    this.text = '';\n    this.onresult = null;\n    this.currentPos = 0;\n    this.token = '';\n    this.refreshToken = '';\n  }\n}\nexport default MyClass;","map":{"version":3,"names":["axios","login","refreshTokens","sendTextToServer","MyClass","constructor","start","currentPos","text","length","endPos","calculateEndPos","sentence","substring","result","onresult","response","post","AccessToken","token","RefreshToken","refreshToken","data","endPosLimit","Math","min","i","includes"],"sources":["/Users/davitBakhutashvili/MyProjects/Markup/markup-app/src/helpers/myClass.js"],"sourcesContent":["import axios from 'axios';\nimport {\n  login,\n  refreshTokens,\n  sendTextToServer,\n} from '../services/useApiServices';\n\nclass MyClass {\n  constructor() {\n    this.text = '';\n    this.onresult = null;\n    this.currentPos = 0;\n    this.token = '';\n    this.refreshToken = '';\n  }\n\n  start = async () => {\n    // Login and get the initial tokens\n    await this.login();\n\n    while (this.currentPos < this.text.length) {\n      const endPos = this.calculateEndPos();\n      const sentence = this.text.substring(this.currentPos, endPos);\n      this.currentPos = endPos;\n\n      // send sentence to the server\n      const result = await this.sendTextToServer(sentence);\n\n      // check if the onresult function exists and call it\n      if (typeof this.onresult === 'function') {\n        this.onresult(result);\n      }\n    }\n  };\n\n  refreshTokens = async () => {\n    const response = await axios.post(\n      'https://enagramm.com/API/Account/RefreshToken',\n      {\n        AccessToken: this.token,\n        RefreshToken: this.refreshToken,\n      }\n    );\n\n    this.token = response.data.AccessToken;\n    this.refreshToken = response.data.RefreshToken;\n  };\n\n  calculateEndPos = () => {\n    const endPosLimit = Math.min(this.currentPos + 230, this.text.length);\n    for (let i = this.currentPos + 150; i <= endPosLimit; i++) {\n      if (['.', '!', '?', ';', ','].includes(this.text[i])) {\n        return i + 1;\n      }\n    }\n    return endPosLimit;\n  };\n}\n\nexport default MyClass;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACEC,KAAK,EACLC,aAAa,EACbC,gBAAgB,QACX,4BAA4B;AAEnC,MAAMC,OAAO,CAAC;EACZC,WAAWA,CAAA,EAAG;IAAA,KAQdC,KAAK,GAAG,YAAY;MAClB;MACA,MAAM,IAAI,CAACL,KAAK,CAAC,CAAC;MAElB,OAAO,IAAI,CAACM,UAAU,GAAG,IAAI,CAACC,IAAI,CAACC,MAAM,EAAE;QACzC,MAAMC,MAAM,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC;QACrC,MAAMC,QAAQ,GAAG,IAAI,CAACJ,IAAI,CAACK,SAAS,CAAC,IAAI,CAACN,UAAU,EAAEG,MAAM,CAAC;QAC7D,IAAI,CAACH,UAAU,GAAGG,MAAM;;QAExB;QACA,MAAMI,MAAM,GAAG,MAAM,IAAI,CAACX,gBAAgB,CAACS,QAAQ,CAAC;;QAEpD;QACA,IAAI,OAAO,IAAI,CAACG,QAAQ,KAAK,UAAU,EAAE;UACvC,IAAI,CAACA,QAAQ,CAACD,MAAM,CAAC;QACvB;MACF;IACF,CAAC;IAAA,KAEDZ,aAAa,GAAG,YAAY;MAC1B,MAAMc,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAC/B,+CAA+C,EAC/C;QACEC,WAAW,EAAE,IAAI,CAACC,KAAK;QACvBC,YAAY,EAAE,IAAI,CAACC;MACrB,CACF,CAAC;MAED,IAAI,CAACF,KAAK,GAAGH,QAAQ,CAACM,IAAI,CAACJ,WAAW;MACtC,IAAI,CAACG,YAAY,GAAGL,QAAQ,CAACM,IAAI,CAACF,YAAY;IAChD,CAAC;IAAA,KAEDT,eAAe,GAAG,MAAM;MACtB,MAAMY,WAAW,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAClB,UAAU,GAAG,GAAG,EAAE,IAAI,CAACC,IAAI,CAACC,MAAM,CAAC;MACrE,KAAK,IAAIiB,CAAC,GAAG,IAAI,CAACnB,UAAU,GAAG,GAAG,EAAEmB,CAAC,IAAIH,WAAW,EAAEG,CAAC,EAAE,EAAE;QACzD,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACkB,CAAC,CAAC,CAAC,EAAE;UACpD,OAAOA,CAAC,GAAG,CAAC;QACd;MACF;MACA,OAAOH,WAAW;IACpB,CAAC;IA/CC,IAAI,CAACf,IAAI,GAAG,EAAE;IACd,IAAI,CAACO,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACR,UAAU,GAAG,CAAC;IACnB,IAAI,CAACY,KAAK,GAAG,EAAE;IACf,IAAI,CAACE,YAAY,GAAG,EAAE;EACxB;AA2CF;AAEA,eAAejB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}